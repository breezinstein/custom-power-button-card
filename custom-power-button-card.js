!function(){"use strict";class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._hass=null,this.config=null}setConfig(t){if(!t)throw new Error("Invalid configuration");if(!t.entity)throw new Error("Entity is required");if(!t.bar_entity)throw new Error("Bar entity is required");this.config={tap_action:{action:"more-info"},show_state:!0,show_icon:!1,bar_min:0,bar_max:1500,color_good:"var(--success-color)",color_bad:"var(--error-color)",color_mid:"var(--warning-color)",...t}}set hass(t){this._hass=t,this.render()}connectedCallback(){this.render()}render(){if(!this._hass||!this.config)return;const t=this._hass.states[this.config.entity],n=this._hass.states[this.config.bar_entity];if(!t||!n)return void(this.shadowRoot.innerHTML=`\n        <ha-card>\n          <div style="padding: 16px; color: var(--error-color);">\n            Entity not found: ${t?this.config.bar_entity:this.config.entity}\n          </div>\n        </ha-card>\n      `);const o=parseFloat(n.state||0),e=Math.max(0,Math.min(100,(o-this.config.bar_min)/(this.config.bar_max-this.config.bar_min)*100));let i;i=e<=33?this.config.color_good:e<=66?this.config.color_mid:this.config.color_bad;const a="on"===t.state,r=n.attributes?.unit_of_measurement||"";this.shadowRoot.innerHTML=`      <style>\n        ha-card {\n          position: relative;\n          overflow: hidden;\n          cursor: pointer;\n        }\n        \n        .card-content {\n          position: relative;\n          padding: 12px;\n          border-radius: 12px;\n          background: ${a?"var(--card-background-color)":"var(--disabled-text-color)"};\n          opacity: ${a?"1":"0.6"};\n          min-height: 42px;\n        }\n          .name {\n          font-size: 14px;\n          font-weight: 500;\n          color: ${a?"var(--primary-text-color)":"var(--secondary-text-color)"};\n          margin-bottom: 2px;\n          line-height: 1.2;\n        }\n        \n        .state {\n          font-size: 12px;\n          position: absolute;\n          right: 12px;\n          top: 12px;\n          color: ${a?"var(--primary-text-color)":"var(--secondary-text-color)"};\n        }\n        \n        .bar {\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          height: 18px;\n          width: 100%;\n          background: linear-gradient(to right, \n            ${i} 0%, \n            ${i} ${e}%, \n            var(--disabled-text-color) ${e}%, \n            var(--disabled-text-color) 100%);\n          border-radius: 0 0 12px 12px;\n          opacity: ${a?"1":"0.3"};\n        }\n        \n        .bar-label {\n          position: absolute;\n          bottom: 0;\n          left: 50%;\n          transform: translateX(-50%);\n          height: 18px;\n          line-height: 18px;\n          font-size: 11px;\n          font-weight: bold;\n          color: ${a?"white":"var(--secondary-text-color)"};\n          text-shadow: 1px 1px 2px rgba(0,0,0,0.7);\n          pointer-events: none;\n        }\n      </style>\n      \n      <ha-card>\n        <div class="card-content">\n          <div class="name">\n            ${this.config.name||t.attributes.friendly_name}\n          </div>\n          \n          ${this.config.show_state?`\n            <div class="state">\n              ${t.state}\n            </div>\n          `:""}\n          \n          <div class="bar"></div>\n          \n          <div class="bar-label">\n            ${Math.trunc(o)}${r}\n          </div>\n        </div>\n      </ha-card>\n    `;this.shadowRoot.querySelector("ha-card").addEventListener("click",()=>{this.handleTap()})}handleTap(){if(!this._hass||!this.config)return;const t=this.config.tap_action;if("more-info"===t.action){const t=new Event("hass-more-info",{bubbles:!0,composed:!0});t.detail={entityId:this.config.entity},this.dispatchEvent(t)}else if("toggle"===t.action)this._hass.callService("homeassistant","toggle",{entity_id:this.config.entity});else if("call-service"===t.action&&t.service){const[n,o]=t.service.split(".");this._hass.callService(n,o,t.service_data||{})}else if("navigate"===t.action&&t.navigation_path){history.pushState(null,"",t.navigation_path);const n=new Event("location-changed",{bubbles:!0,composed:!0});n.detail={replace:!1},window.dispatchEvent(n)}else"url"===t.action&&t.url_path&&window.open(t.url_path)}getCardSize(){return 1}static getConfigElement(){return document.createElement("custom-power-button-card-editor")}static getStubConfig(){return{entity:"switch.example",bar_entity:"sensor.example_power",name:"Example Device",bar_min:0,bar_max:1500}}}customElements.define("custom-power-button-card",t),window.customCards=window.customCards||[],window.customCards.push({type:"custom-power-button-card",name:"Custom Power Button Card",description:"A button card with power consumption bar display",preview:!0,documentationURL:"https://github.com/yourusername/custom-power-button-card"}),console.info("%c CUSTOM-POWER-BUTTON-CARD %c 1.0.0 ","color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray")}();
